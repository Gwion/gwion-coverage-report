<!DOCTYPE html>
<script type="text/javascript" src="../focus.js"></script><html>

  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Gwion coverage report</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="index.css">
  </head>

  <body>
    <h1>GCC Code Coverage Report</h1>

    <hr/>

    <div class="summary">
<table class="legend">
  <tr>
    <th scope="row">Directory:</th>
    <td>src/</td>
  </tr>
  <tr>
    <th scope="row">File:</th>
    <td>src/parse/type_decl.c</td>
  </tr>
  <tr>
    <th scope="row">Date:</th>
    <td>2020-05-06 17:06:56</td>
  </tr>
</table>
<table class="coverage">
  <tr>
    <th></th>
    <th scope="col">Exec</th>
    <th scope="col">Total</th>
    <th scope="col">Coverage</th>
  </tr>
  <tr>
    <th scope="row">Lines:</th>
    <td>48</td>
    <td>49</td>
    <td class="coverage-high">98.0%</td>
  </tr>
  <tr>
    <th scope="row">Branches:</th>
    <td>33</td>
    <td>34</td>
    <td class="coverage-high">97.1%</td>
  </tr>
</table>
    </div>

    <hr/>

<div class="file-source">
  <table>
    <tr>
      <td align="right" class="srcHeader">Line</td>
      <td align="right" class="srcHeader">Branch</td>
      <td align="right" class="srcHeader">Exec</td>
      <td align="left" class="srcHeader src">Source</td>
    </tr>


    <tr class="source-line">
      <td class="lineno">1</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src ">#include &#34;gwion_util.h&#34;</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">2</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src ">#include &#34;gwion_ast.h&#34;</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">3</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src ">#include &#34;gwion_env.h&#34;</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">4</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src ">#include &#34;vm.h&#34;</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">5</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src ">#include &#34;traverse.h&#34;</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">6</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src ">#include &#34;parse.h&#34;</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">7</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src "></td>
    </tr>

    <tr class="source-line">
      <td class="lineno">8</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src ">#define STR_NONNULL &#34;:nonnull&#34;</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">9</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src ">#define STRLEN_NONNULL strlen(STR_NONNULL)</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">10</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src "></td>
    </tr>

    <tr class="source-line">
      <td class="lineno">11</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">17526</td>
      <td class="src coveredLine">ANN Type type_nonnull(const Env env, const Type base) {</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">12</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">17526</td>
      <td class="src coveredLine">  char c[strlen(base-&gt;name) + 9];</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">13</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">17526</td>
      <td class="src coveredLine">  sprintf(c, &#34;%s%s&#34;, base-&gt;name, STR_NONNULL);</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">14</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">17526</td>
      <td class="src coveredLine">  const Symbol sym = insert_symbol(c);</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">15</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">17526</td>
      <td class="src coveredLine">  const Type exist = nspc_lookup_type1(base-&gt;e-&gt;owner, sym);</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">16</td>
      <td class="linebranch">
        <details class="linebranchDetails">
        <summary class="linebranchSummary">2/2</summary>
        <div class="linebranchContents">
          <div class="takenBranch">&check; Branch 0 taken 13131 times.</div>
          <div class="takenBranch">&check; Branch 1 taken 4395 times.</div>
        </div>
        </details>
      </td>
      <td class="linecount coveredLine">17526</td>
      <td class="src coveredLine">  if(exist)</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">17</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">13131</td>
      <td class="src coveredLine">    return exist;</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">18</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">4395</td>
      <td class="src coveredLine">  const Type t = type_copy(env-&gt;gwion-&gt;mp, base);</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">19</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">4395</td>
      <td class="src coveredLine">  t-&gt;e-&gt;parent = base;</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">20</td>
      <td class="linebranch">
        <details class="linebranchDetails">
        <summary class="linebranchSummary">2/2</summary>
        <div class="linebranchContents">
          <div class="takenBranch">&check; Branch 0 taken 4370 times.</div>
          <div class="takenBranch">&check; Branch 1 taken 25 times.</div>
        </div>
        </details>
      </td>
      <td class="linecount coveredLine">4395</td>
      <td class="src coveredLine">  if(t-&gt;nspc)</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">21</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">4370</td>
      <td class="src coveredLine">    ADD_REF(t-&gt;nspc)</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">22</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">4395</td>
      <td class="src coveredLine">  t-&gt;name = s_name(sym);</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">23</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">4395</td>
      <td class="src coveredLine">  t-&gt;flag = base-&gt;flag;</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">24</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">4395</td>
      <td class="src coveredLine">  SET_FLAG(t, nonnull);</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">25</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">4395</td>
      <td class="src coveredLine">  nspc_add_type_front(t-&gt;e-&gt;owner, sym, t);</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">26</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">4395</td>
      <td class="src coveredLine">  mk_class(env, t);</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">27</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">4395</td>
      <td class="src coveredLine">  return t;</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">28</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src ">}</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">29</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src "></td>
    </tr>

    <tr class="source-line">
      <td class="lineno">30</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">435212</td>
      <td class="src coveredLine">ANN Type type_decl_resolve(const Env env, Type_Decl* td) {</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">31</td>
      <td class="linebranch">
        <details class="linebranchDetails">
        <summary class="linebranchSummary">2/2</summary>
        <div class="linebranchContents">
          <div class="takenBranch">&check; Branch 1 taken 41 times.</div>
          <div class="takenBranch">&check; Branch 2 taken 435171 times.</div>
        </div>
        </details>
      </td>
      <td class="linecount coveredLine">435212</td>
      <td class="src coveredLine">  DECL_OO(const Type, base, = find_type(env, td))</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">32</td>
      <td class="linebranch">
        <details class="linebranchDetails">
        <summary class="linebranchSummary">3/4</summary>
        <div class="linebranchContents">
          <div class="takenBranch">&check; Branch 0 taken 353 times.</div>
          <div class="takenBranch">&check; Branch 1 taken 434818 times.</div>
          <div class="notTakenBranch">&cross; Branch 2 not taken.</div>
          <div class="takenBranch">&check; Branch 3 taken 353 times.</div>
        </div>
        </details>
      </td>
      <td class="linecount coveredLine">435171</td>
      <td class="src coveredLine">  if(base-&gt;e-&gt;ctx &amp;&amp; base-&gt;e-&gt;ctx-&gt;error)</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">33</td>
      <td class="linebranch">
      </td>
      <td class="linecount uncoveredLine"></td>
      <td class="src uncoveredLine">    ERR_O(td_pos(td), _(&#34;type &#39;%s&#39; is invalid&#34;), base-&gt;name)</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">34</td>
      <td class="linebranch">
        <details class="linebranchDetails">
        <summary class="linebranchSummary">2/2</summary>
        <div class="linebranchContents">
          <div class="takenBranch">&check; Branch 1 taken 10 times.</div>
          <div class="takenBranch">&check; Branch 2 taken 435161 times.</div>
        </div>
        </details>
      </td>
      <td class="linecount coveredLine">435171</td>
      <td class="src coveredLine">  DECL_OO(const Type, t, = scan_type(env, base, td))</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">35</td>
      <td class="linebranch">
        <details class="linebranchDetails">
        <summary class="linebranchSummary">2/2</summary>
        <div class="linebranchContents">
          <div class="takenBranch">&check; Branch 0 taken 39 times.</div>
          <div class="takenBranch">&check; Branch 1 taken 435122 times.</div>
        </div>
        </details>
      </td>
      <td class="linecount coveredLine">435161</td>
      <td class="src coveredLine">  const Type ret = !td-&gt;array ? t : array_type(env, t, td-&gt;array-&gt;depth);</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">36</td>
      <td class="linebranch">
        <details class="linebranchDetails">
        <summary class="linebranchSummary">2/2</summary>
        <div class="linebranchContents">
          <div class="takenBranch">&check; Branch 0 taken 17529 times.</div>
          <div class="takenBranch">&check; Branch 1 taken 417632 times.</div>
        </div>
        </details>
      </td>
      <td class="linecount coveredLine">435161</td>
      <td class="src coveredLine">  if(GET_FLAG(td, nonnull)) {</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">37</td>
      <td class="linebranch">
        <details class="linebranchDetails">
        <summary class="linebranchSummary">2/2</summary>
        <div class="linebranchContents">
          <div class="takenBranch">&check; Branch 0 taken 1 times.</div>
          <div class="takenBranch">&check; Branch 1 taken 17528 times.</div>
        </div>
        </details>
      </td>
      <td class="linecount coveredLine">17529</td>
      <td class="src coveredLine">    if(isa(ret, env-&gt;gwion-&gt;type[et_void]) &gt; 0)</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">38</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">1</td>
      <td class="src coveredLine">      ERR_O(td_pos(td), _(&#34;void types can&#39;t be nonnull.&#34;))</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">39</td>
      <td class="linebranch">
        <details class="linebranchDetails">
        <summary class="linebranchSummary">4/4</summary>
        <div class="linebranchContents">
          <div class="takenBranch">&check; Branch 0 taken 23 times.</div>
          <div class="takenBranch">&check; Branch 1 taken 17505 times.</div>
          <div class="takenBranch">&check; Branch 2 taken 22 times.</div>
          <div class="takenBranch">&check; Branch 3 taken 1 times.</div>
        </div>
        </details>
      </td>
      <td class="linecount coveredLine">17528</td>
      <td class="src coveredLine">    if(isa(ret, env-&gt;gwion-&gt;type[et_object]) &lt; 0 &amp;&amp; isa(ret, env-&gt;gwion-&gt;type[et_fptr]) &lt; 0)</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">40</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">22</td>
      <td class="src coveredLine">      return ret;</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">41</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">17506</td>
      <td class="src coveredLine">    return type_nonnull(env, ret);</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">42</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src ">  }</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">43</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">417632</td>
      <td class="src coveredLine">  return ret;</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">44</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src ">}</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">45</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src "></td>
    </tr>

    <tr class="source-line">
      <td class="lineno">46</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src ">struct td_info {</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">47</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src ">  Type_List tl;</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">48</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src ">  GwText text;</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">49</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src ">};</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">50</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src "></td>
    </tr>

    <tr class="source-line">
      <td class="lineno">51</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">146</td>
      <td class="src coveredLine">ANN static m_bool td_info_run(const Env env, struct td_info* info) {</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">52</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">146</td>
      <td class="src coveredLine">  Type_List tl = info-&gt;tl;</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">53</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src ">  do {</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">54</td>
      <td class="linebranch">
        <details class="linebranchDetails">
        <summary class="linebranchSummary">2/2</summary>
        <div class="linebranchContents">
          <div class="takenBranch">&check; Branch 1 taken 1 times.</div>
          <div class="takenBranch">&check; Branch 2 taken 151 times.</div>
        </div>
        </details>
      </td>
      <td class="linecount coveredLine">152</td>
      <td class="src coveredLine">    DECL_OB(const Type,  t, = known_type(env, tl-&gt;td))</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">55</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">151</td>
      <td class="src coveredLine">    text_add(&amp;info-&gt;text, t-&gt;name);</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">56</td>
      <td class="linebranch">
        <details class="linebranchDetails">
        <summary class="linebranchSummary">2/2</summary>
        <div class="linebranchContents">
          <div class="takenBranch">&check; Branch 0 taken 6 times.</div>
          <div class="takenBranch">&check; Branch 1 taken 145 times.</div>
        </div>
        </details>
      </td>
      <td class="linecount coveredLine">151</td>
      <td class="src coveredLine">    if(tl-&gt;next)</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">57</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">6</td>
      <td class="src coveredLine">      text_add(&amp;info-&gt;text, &#34;,&#34;);</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">58</td>
      <td class="linebranch">
        <details class="linebranchDetails">
        <summary class="linebranchSummary">2/2</summary>
        <div class="linebranchContents">
          <div class="takenBranch">&check; Branch 0 taken 6 times.</div>
          <div class="takenBranch">&check; Branch 1 taken 145 times.</div>
        </div>
        </details>
      </td>
      <td class="linecount coveredLine">151</td>
      <td class="src coveredLine">  } while((tl = tl-&gt;next));</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">59</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">145</td>
      <td class="src coveredLine">  return GW_OK;</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">60</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src ">}</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">61</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src "></td>
    </tr>

    <tr class="source-line">
      <td class="lineno">62</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">146</td>
      <td class="src coveredLine">ANEW ANN m_str tl2str(const Env env, Type_List tl) {</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">63</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">146</td>
      <td class="src coveredLine">  struct td_info info = { .tl=tl, { .mp=env-&gt;gwion-&gt;mp} };</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">64</td>
      <td class="linebranch">
        <details class="linebranchDetails">
        <summary class="linebranchSummary">2/2</summary>
        <div class="linebranchContents">
          <div class="takenBranch">&check; Branch 1 taken 1 times.</div>
          <div class="takenBranch">&check; Branch 2 taken 145 times.</div>
        </div>
        </details>
      </td>
      <td class="linecount coveredLine">146</td>
      <td class="src coveredLine">  CHECK_BO(td_info_run(env, &amp;info))</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">65</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">145</td>
      <td class="src coveredLine">  return info.text.str;</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">66</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src ">}</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">67</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src "></td>
    </tr>

    <tr class="source-line">
      <td class="lineno">68</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">52</td>
      <td class="src coveredLine">ANN static inline void* type_unknown(const Env env, const Type_Decl* td) {</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">69</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">52</td>
      <td class="src coveredLine">  env_err(env, td-&gt;pos, _(&#34;unknown type &#39;%s&#39;&#34;), s_name(td-&gt;xid));</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">70</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">52</td>
      <td class="src coveredLine">  return NULL;</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">71</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src ">}</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">72</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src "></td>
    </tr>

    <tr class="source-line">
      <td class="lineno">73</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">435220</td>
      <td class="src coveredLine">ANN Type known_type(const Env env, Type_Decl* td) {</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">74</td>
      <td class="linebranch">
        <details class="linebranchDetails">
        <summary class="linebranchSummary">2/2</summary>
        <div class="linebranchContents">
          <div class="takenBranch">&check; Branch 0 taken 10 times.</div>
          <div class="takenBranch">&check; Branch 1 taken 435210 times.</div>
        </div>
        </details>
      </td>
      <td class="linecount coveredLine">435220</td>
      <td class="src coveredLine">  if(!td-&gt;xid)</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">75</td>
      <td class="linebranch">
      </td>
      <td class="linecount coveredLine">10</td>
      <td class="src coveredLine">    return env-&gt;gwion-&gt;type[et_undefined];</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">76</td>
      <td class="linebranch">
        <details class="linebranchDetails">
        <summary class="linebranchSummary">2/2</summary>
        <div class="linebranchContents">
          <div class="takenBranch">&check; Branch 1 taken 435158 times.</div>
          <div class="takenBranch">&check; Branch 2 taken 52 times.</div>
        </div>
        </details>
      </td>
      <td class="linecount coveredLine">435210</td>
      <td class="src coveredLine">  return type_decl_resolve(env, td) ?:type_unknown(env, td);</td>
    </tr>

    <tr class="source-line">
      <td class="lineno">77</td>
      <td class="linebranch">
      </td>
      <td class="linecount "></td>
      <td class="src ">}</td>
    </tr>

  </table>
</div>

    <hr/>

    <footer>
      Generated by: <a href="http://gcovr.com">GCOVR (Version 4.2)</a>
    </footer>
  </body>
</html>
